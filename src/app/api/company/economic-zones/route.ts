import { NextRequest, NextResponse } from 'next/server';

// 强制动态渲染
export const dynamic = 'force-dynamic';

export async function GET(request: NextRequest) {
  try {
    const { searchParams } = new URL(request.url);
    const province = searchParams.get('province');

    if (!province) {
      return NextResponse.json(
        { error: '缺少省份参数' },
        { status: 400 }
      );
    }

    // 根据CSV字典表构建的各省份对应的国家级经开区数据
    const economicZones: { [key: string]: string[] } = {
      '北京市': [
        '北京经济技术开发区'
      ],
      '天津市': [
        '天津经济技术开发区',
        '天津西青经济技术开发区',
        '天津东丽经济技术开发区',
        '天津子牙经济技术开发区',
        '天津临港经济技术开发区',
        '天津武清经济技术开发区',
        '天津北辰经济技术开发区'
      ],
      '河北省': [
        '秦皇岛经济技术开发区',
        '廊坊经济技术开发区',
        '石家庄经济技术开发区',
        '唐山曹妃甸经济技术开发区',
        '沧州临港经济技术开发区',
        '邯郸经济技术开发区',
        '邢台经济技术开发区',
        '承德经济技术开发区',
        '张家口经济技术开发区',
        '衡水经济技术开发区'
      ],
      '山西省': [
        '太原经济技术开发区',
        '大同经济技术开发区',
        '长治经济技术开发区',
        '晋城经济技术开发区',
        '运城经济技术开发区',
        '朔州经济技术开发区'
      ],
      '内蒙古自治区': [
        '呼和浩特经济技术开发区',
        '包头稀土高新技术产业开发区',
        '赤峰经济技术开发区',
        '通辽经济技术开发区',
        '满洲里边境经济合作区',
        '鄂尔多斯经济技术开发区'
      ],
      '辽宁省': [
        '大连经济技术开发区',
        '沈阳经济技术开发区',
        '营口经济技术开发区',
        '丹东边境经济合作区',
        '盘锦经济技术开发区',
        '鞍山经济技术开发区',
        '抚顺经济技术开发区',
        '锦州经济技术开发区',
        '辽阳经济技术开发区',
        '阜新经济技术开发区',
        '本溪经济技术开发区',
        '葫芦岛经济技术开发区',
        '铁岭经济技术开发区'
      ],
      '吉林省': [
        '长春经济技术开发区',
        '吉林经济技术开发区',
        '珲春边境经济合作区',
        '通化经济技术开发区',
        '延吉经济技术开发区'
      ],
      '黑龙江省': [
        '哈尔滨经济技术开发区',
        '大庆经济技术开发区',
        '绥芬河边境经济合作区',
        '黑河边境经济合作区',
        '齐齐哈尔经济技术开发区',
        '牡丹江经济技术开发区'
      ],
      '上海市': [
        '上海漕河泾新兴技术开发区',
        '上海闵行经济技术开发区',
        '上海虹桥经济技术开发区',
        '上海金桥经济技术开发区',
        '上海松江经济技术开发区',
        '上海青浦经济技术开发区',
        '上海奉贤经济技术开发区',
        '上海康桥经济技术开发区',
        '上海崇明经济技术开发区'
      ],
      '江苏省': [
        '连云港经济技术开发区',
        '南通经济技术开发区',
        '昆山经济技术开发区',
        '南京经济技术开发区',
        '无锡经济技术开发区',
        '苏州工业园区',
        '常州经济技术开发区',
        '淮安经济技术开发区',
        '扬州经济技术开发区',
        '镇江经济技术开发区',
        '徐州经济技术开发区',
        '盐城经济技术开发区',
        '泰州经济技术开发区',
        '江宁经济技术开发区',
        '宿迁经济技术开发区',
        '宜兴经济技术开发区',
        '吴江经济技术开发区',
        '吴中经济技术开发区',
        '常熟经济技术开发区',
        '张家港经济技术开发区',
        '太仓港经济技术开发区',
        '海门经济技术开发区',
        '如东经济技术开发区',
        '丹阳经济技术开发区',
        '句容经济技术开发区',
        '溧阳经济技术开发区'
      ],
      '浙江省': [
        '宁波经济技术开发区',
        '杭州经济技术开发区',
        '温州经济技术开发区',
        '萧山经济技术开发区',
        '余姚经济技术开发区',
        '嘉兴经济技术开发区',
        '湖州经济技术开发区',
        '绍兴经济技术开发区',
        '衢州经济技术开发区',
        '舟山经济技术开发区',
        '杭州湾上虞经济技术开发区',
        '德清经济技术开发区',
        '瑞安经济技术开发区',
        '海宁经济技术开发区',
        '义乌经济技术开发区',
        '长兴经济技术开发区',
        '临海经济技术开发区',
        '丽水经济技术开发区',
        '慈溪经济技术开发区',
        '平湖经济技术开发区'
      ],
      '安徽省': [
        '合肥经济技术开发区',
        '芜湖经济技术开发区',
        '滁州经济技术开发区',
        '马鞍山经济技术开发区',
        '蚌埠经济技术开发区',
        '淮南经济技术开发区',
        '宣城经济技术开发区',
        '安庆经济技术开发区',
        '铜陵经济技术开发区',
        '淮北经济技术开发区',
        '阜阳经济技术开发区',
        '池州经济技术开发区',
        '宿州经济技术开发区',
        '六安经济技术开发区',
        '亳州经济技术开发区'
      ],
      '福建省': [
        '福州经济技术开发区',
        '福清融侨经济技术开发区',
        '东山经济技术开发区',
        '厦门海沧台商投资区',
        '厦门集美台商投资区',
        '泉州经济技术开发区',
        '漳州招商局经济技术开发区',
        '龙岩经济技术开发区',
        '三明经济技术开发区',
        '南平经济技术开发区',
        '宁德经济技术开发区'
      ],
      '江西省': [
        '南昌经济技术开发区',
        '赣州经济技术开发区',
        '九江经济技术开发区',
        '吉安经济技术开发区',
        '抚州高新技术产业开发区',
        '宜春经济技术开发区',
        '上饶经济技术开发区',
        '萍乡经济技术开发区',
        '新余经济技术开发区',
        '景德镇高新技术产业开发区',
        '鹰潭高新技术产业开发区'
      ],
      '山东省': [
        '青岛经济技术开发区',
        '烟台经济技术开发区',
        '威海经济技术开发区',
        '济南经济技术开发区',
        '淄博经济技术开发区',
        '潍坊经济技术开发区',
        '济宁经济技术开发区',
        '临沂经济技术开发区',
        '德州经济技术开发区',
        '聊城经济技术开发区',
        '滨州经济技术开发区',
        '菏泽经济技术开发区',
        '东营经济技术开发区',
        '泰安高新技术产业开发区',
        '莱芜经济技术开发区',
        '枣庄经济技术开发区'
      ],
      '河南省': [
        '郑州经济技术开发区',
        '洛阳经济技术开发区',
        '开封经济技术开发区',
        '漯河经济技术开发区',
        '南阳高新技术产业开发区',
        '新乡经济技术开发区',
        '平顶山高新技术产业开发区',
        '焦作经济技术开发区',
        '安阳经济技术开发区',
        '许昌经济技术开发区',
        '濮阳经济技术开发区',
        '驻马店经济技术开发区',
        '周口经济技术开发区',
        '商丘经济技术开发区'
      ],
      '湖北省': [
        '武汉经济技术开发区',
        '襄阳经济技术开发区',
        '宜昌经济技术开发区',
        '黄石经济技术开发区',
        '荆州经济技术开发区',
        '孝感经济技术开发区',
        '荆门经济技术开发区',
        '咸宁高新技术产业开发区',
        '鄂州葛店经济技术开发区'
      ],
      '湖南省': [
        '长沙经济技术开发区',
        '岳阳经济技术开发区',
        '株洲经济技术开发区',
        '湘潭经济技术开发区',
        '郴州高新技术产业开发区',
        '常德经济技术开发区',
        '益阳高新技术产业开发区',
        '衡阳经济技术开发区',
        '邵阳经济技术开发区',
        '永州经济技术开发区',
        '怀化经济技术开发区',
        '娄底经济技术开发区'
      ],
      '广东省': [
        '广州经济技术开发区',
        '湛江经济技术开发区',
        '惠州大亚湾经济技术开发区',
        '增城经济技术开发区',
        '广州南沙经济技术开发区',
        '珠海经济技术开发区',
        '肇庆高新技术产业开发区',
        '汕头保税区'
      ],
      '广西壮族自治区': [
        '南宁经济技术开发区',
        '钦州港经济技术开发区',
        '凭祥边境经济合作区',
        '北海经济技术开发区',
        '柳州经济技术开发区',
        '桂林经济技术开发区'
      ],
      '海南省': [
        '洋浦经济开发区',
        '海口国家高新技术产业开发区'
      ],
      '重庆市': [
        '重庆经济技术开发区',
        '重庆两江新区',
        '重庆长寿经济技术开发区'
      ],
      '四川省': [
        '成都经济技术开发区',
        '绵阳经济技术开发区',
        '德阳经济技术开发区',
        '广安经济技术开发区',
        '泸州经济技术开发区',
        '遂宁经济技术开发区',
        '宜宾临港经济技术开发区'
      ],
      '贵州省': [
        '贵阳经济技术开发区',
        '遵义经济技术开发区'
      ],
      '云南省': [
        '昆明经济技术开发区',
        '瑞丽边境经济合作区',
        '畹町边境经济合作区',
        '红河经济技术开发区'
      ],
      '陕西省': [
        '西安经济技术开发区'
      ],
      '甘肃省': [
        '兰州经济技术开发区'
      ],
      '新疆维吾尔自治区': [
        '乌鲁木齐经济技术开发区'
      ]
    };

    const zones = economicZones[province] || [];

    return NextResponse.json({
      success: true,
      data: zones
    });

  } catch (error) {
    console.error('获取经开区列表错误:', error);
    return NextResponse.json(
      { error: '获取经开区列表失败' },
      { status: 500 }
    );
  }
}