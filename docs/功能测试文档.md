# 绿色技术平台功能测试文档

## 📋 概览

### 平台简介
绿色技术平台是一个基于Next.js和Spring Boot的全栈应用，旨在为用户提供绿色低碳技术搜索、展示和管理服务。平台支持技术提交、企业档案管理、多语言切换等功能。

### 技术架构
- **前端**: Next.js 14 + TypeScript + Tailwind CSS + shadcn/ui
- **后端**: Spring Boot 3.2.5 + Java 17
- **数据库**: Supabase (开发环境) / HuaweiCloud RDS (生产环境)
- **认证**: Supabase Auth + JWT + SMS验证
- **部署**: Vercel (前端) + 多云服务后端

### 测试目标
- 验证所有核心功能的正确性和稳定性
- 确保用户体验流畅，界面响应及时
- 验证多语言支持的完整性
- 确保数据安全和权限控制
- 验证SMS服务配置的可靠性

### 测试环境要求
- **开发环境**: `npm run dev` 启动前端，Spring Boot后端
- **数据库**: Supabase连接正常，测试数据完整
- **浏览器**: Chrome, Firefox, Safari, Edge最新版本
- **移动设备**: iOS Safari, Android Chrome测试
- **网络**: 稳定的互联网连接

---

## 🔐 1. 用户认证系统测试

### 1.1 SMS验证码登录/注册

#### 测试前置条件
- SMS服务配置正确（腾讯云或Supabase）
- 环境变量 `NEXT_PUBLIC_USE_TENCENT_SMS=true` 已设置
- 手机号码有效且未注册（注册测试）或已注册（登录测试）

#### 1.1.1 手机号验证码注册测试

**测试步骤**:
1. 访问主页，点击"登录/注册"按钮
2. 选择"手机号注册"标签
3. 输入有效手机号：`13800138000`
4. 点击"获取验证码"按钮
5. 检查SMS服务路由决策日志
6. 输入接收到的验证码
7. 设置密码（至少6位）
8. 可选填写用户名
9. 点击"注册"按钮

**预期结果**:
- 验证码发送成功，显示60秒倒计时
- 控制台显示使用腾讯云SMS路由
- 注册成功后自动登录
- 跳转到用户控制台页面
- localStorage保存用户信息和token

**常见问题排查**:
- 如果验证码发送失败，检查控制台SMS路由日志
- 确认环境变量配置正确
- 验证手机号格式（仅支持中国大陆手机号）

#### 1.1.2 手机号验证码登录测试

**测试步骤**:
1. 访问主页，点击"登录/注册"按钮
2. 选择"验证码登录"标签
3. 输入已注册手机号
4. 点击"获取验证码"按钮
5. 输入接收到的验证码
6. 点击"登录"按钮

**预期结果**:
- 验证码发送成功
- 登录成功，跳转到相应页面
- 用户状态更新，显示登录后的界面

#### 相关API接口
- `POST /api/auth/send-sms-code` - 发送SMS验证码
- `POST /api/auth/custom-phone-register` - 手机号注册
- `POST /api/auth/custom-phone-code-login` - 验证码登录

---

### 1.2 密码登录测试

#### 1.2.1 手机号密码登录

**测试步骤**:
1. 访问登录页面
2. 选择"密码登录"标签
3. 账号类型选择"手机号"
4. 输入已注册手机号和正确密码
5. 完成Turnstile人机验证（如果启用）
6. 点击"登录"按钮

**预期结果**:
- 登录成功，跳转到用户控制台
- 用户状态正确更新

#### 1.2.2 邮箱密码登录

**测试步骤**:
1. 账号类型选择"邮箱"
2. 输入已注册邮箱和正确密码
3. 完成人机验证
4. 点击"登录"按钮

**预期结果**:
- 登录成功
- 用户信息正确显示

#### 相关API接口
- `POST /api/auth/custom-phone-login` - 手机号密码登录
- 邮箱登录使用Supabase Auth API

---

### 1.3 密码找回测试

#### 1.3.1 手机号密码重置

**测试步骤**:
1. 在登录页面点击"忘记密码"
2. 选择手机号重置
3. 输入已注册手机号
4. 获取并输入验证码
5. 设置新密码
6. 确认密码重置

**预期结果**:
- 验证码发送成功
- 密码重置成功
- 可以使用新密码登录

#### 相关API接口
- `POST /api/auth/reset-password` - 密码重置

---

### 1.4 用户登出测试

**测试步骤**:
1. 在已登录状态下，点击用户菜单
2. 选择"退出登录"
3. 确认登出操作

**预期结果**:
- 成功登出，返回首页
- localStorage中的用户信息和token被清除
- 页面显示未登录状态

---

## 🏠 2. 主页功能测试

### 2.1 技术搜索功能

#### 2.1.1 关键词搜索测试

**测试步骤**:
1. 访问主页 `http://localhost:3000`
2. 在搜索框中输入关键词："太阳能"
3. 点击搜索按钮或按Enter键
4. 查看搜索结果页面

**预期结果**:
- 搜索结果正确显示相关技术
- 分页功能正常工作
- 搜索关键词在URL中正确体现
- 搜索统计信息准确

#### 2.1.2 空搜索测试

**测试步骤**:
1. 搜索框留空，直接点击搜索
2. 查看结果

**预期结果**:
- 显示所有技术列表
- 或提示输入搜索关键词

#### 相关API接口
- `GET /api/tech/search` - 技术搜索
- `GET /api/tech/search-stats` - 搜索统计

---

### 2.2 技术分类筛选

#### 2.2.1 一级分类筛选

**测试步骤**:
1. 在主页点击任一技术大分类（如"新能源技术"）
2. 查看筛选结果
3. 尝试选择多个一级分类

**预期结果**:
- 筛选结果准确
- 分类标签正确显示
- URL参数正确更新

#### 2.2.2 二级分类筛选

**测试步骤**:
1. 选择一级分类后，再选择对应的二级分类
2. 查看筛选结果
3. 测试分类组合筛选

**预期结果**:
- 二级筛选结果正确
- 面包屑导航显示准确
- 筛选条件可以清除

#### 相关API接口
- `GET /api/tech/categories` - 获取技术分类
- `GET /api/tech/filter-options` - 获取筛选选项

---

### 2.3 地理位置筛选

#### 2.3.1 国家筛选测试

**测试步骤**:
1. 在筛选面板选择"国家"筛选
2. 选择"中国"
3. 查看筛选结果

**预期结果**:
- 只显示中国的技术项目
- 国家标签正确显示

#### 2.3.2 省份筛选测试

**测试步骤**:
1. 选择中国后，进一步选择省份（如"广东省"）
2. 查看筛选结果

**预期结果**:
- 只显示广东省的技术项目
- 级联筛选工作正常

#### 2.3.3 开发区筛选测试

**测试步骤**:
1. 在省份基础上，选择具体开发区
2. 查看筛选结果

**预期结果**:
- 三级筛选工作正常
- 筛选条件叠加正确

---

### 2.4 搜索结果展示

#### 2.4.1 结果列表测试

**测试步骤**:
1. 执行任意搜索
2. 查看结果列表显示
3. 测试结果项点击

**预期结果**:
- 技术信息显示完整（标题、描述、分类、位置）
- 技术图片正确加载
- 点击后跳转到详情页面

#### 2.4.2 排序功能测试

**测试步骤**:
1. 在搜索结果页面测试不同排序选项
2. 选择"最新发布"、"最相关"等排序方式

**预期结果**:
- 排序结果符合预期
- 排序选项状态正确更新

#### 2.4.3 分页测试

**测试步骤**:
1. 在有多页结果的搜索中测试分页
2. 点击页码导航
3. 测试上一页/下一页按钮

**预期结果**:
- 分页跳转正常
- 页码状态正确
- URL正确更新

---

### 2.5 国际化功能测试

#### 2.5.1 语言切换测试

**测试步骤**:
1. 在页面右上角找到语言切换器
2. 从中文切换到英文
3. 查看页面内容变化
4. 切换回中文

**预期结果**:
- 页面内容完全切换到对应语言
- URL路径包含正确的locale参数
- 用户偏好设置被记住

#### 2.5.2 多语言搜索测试

**测试步骤**:
1. 在英文模式下进行搜索
2. 查看搜索结果和界面显示
3. 切换到中文模式再次搜索

**预期结果**:
- 搜索功能在不同语言下正常工作
- 技术数据支持多语言显示
- 界面元素正确翻译

#### 相关文件
- `src/i18n/` - 国际化配置
- `src/components/common/language-switcher.tsx` - 语言切换器

---

## 👤 3. 用户功能测试

### 3.1 用户控制台

#### 3.1.1 控制台首页测试

**测试步骤**:
1. 登录用户账号
2. 访问用户控制台 `/user`
3. 查看控制台首页内容

**预期结果**:
- 显示用户基本信息
- 显示快捷操作入口
- 侧边栏导航正确

#### 相关页面
- `src/app/[locale]/user/page.tsx` - 用户控制台首页

---

### 3.2 个人资料管理

#### 3.2.1 基本信息编辑

**测试步骤**:
1. 进入用户控制台
2. 点击"个人资料"或访问 `/profile`
3. 编辑基本信息（姓名、头像等）
4. 保存更改

**预期结果**:
- 信息编辑界面正常显示
- 保存后信息更新成功
- 头像上传功能正常

#### 3.2.2 账户安全设置

**测试步骤**:
1. 在个人资料页面切换到"账户安全"标签
2. 测试修改密码功能
3. 查看登录历史（如果有）

**预期结果**:
- 密码修改流程正确
- 安全设置界面完整

#### 相关页面
- `src/app/[locale]/profile/page.tsx` - 个人资料页面
- `src/app/[locale]/profile/components/` - 个人资料组件

---

### 3.3 技术管理

#### 3.3.1 技术提交测试

**测试步骤**:
1. 在用户控制台点击"我的技术"
2. 点击"提交新技术"按钮
3. 填写完整的技术信息表单：
   - 技术名称：`测试太阳能技术`
   - 技术描述：详细描述
   - 技术分类：选择合适分类
   - 地理位置：选择位置信息
   - 上传技术图片
   - 填写联系信息
4. 提交表单

**预期结果**:
- 表单验证正确工作
- 图片上传成功
- 技术提交成功，状态为"待审核"
- 用户可以在技术列表中看到提交的内容

#### 3.3.2 技术列表查看

**测试步骤**:
1. 在"我的技术"页面查看技术列表
2. 查看不同状态的技术（待审核、已通过、已拒绝）
3. 测试技术搜索和筛选

**预期结果**:
- 技术列表正确显示
- 状态标识清晰
- 搜索筛选功能正常

#### 3.3.3 技术编辑测试

**测试步骤**:
1. 在技术列表中选择一个待审核或已拒绝的技术
2. 点击"编辑"按钮
3. 修改技术信息
4. 重新提交

**预期结果**:
- 编辑界面正确显示原有信息
- 修改保存成功
- 状态重新变为"待审核"

#### 相关页面和API
- `src/app/[locale]/user/technologies/page.tsx` - 用户技术管理页面
- `src/app/[locale]/user/technologies/components/user-technology-form.tsx` - 技术提交表单
- `GET /api/user/technologies` - 获取用户技术列表
- `POST /api/user/technologies` - 提交技术
- `PUT /api/user/technologies/[id]` - 更新技术
- `POST /api/user/technologies/[id]/resubmit` - 重新提交技术

---

### 3.4 企业档案管理

#### 3.4.1 企业信息创建

**测试步骤**:
1. 访问 `/user/companies`
2. 点击"添加企业"按钮
3. 填写企业基本信息：
   - 企业名称：`测试绿色科技有限公司`
   - 统一社会信用代码：`91110000000000000X`
   - 企业规模：选择规模
   - 所属行业：选择行业
   - 地理位置：国家、省份、开发区三级选择
   - 企业描述：详细描述
   - 上传企业logo
4. 保存企业信息

**预期结果**:
- 企业信息保存成功
- logo上传正常
- 地理位置三级联动正确工作

#### 3.4.2 企业信息编辑

**测试步骤**:
1. 在企业列表中选择已创建的企业
2. 点击"编辑"按钮
3. 修改企业信息
4. 保存更改

**预期结果**:
- 编辑界面显示原有信息
- 修改保存成功

#### 相关页面和API
- `src/app/[locale]/user/companies/page.tsx` - 企业管理页面
- `GET /api/user/company` - 获取用户企业信息
- `POST /api/user/company` - 创建/更新企业信息

---

### 3.5 消息管理

#### 3.5.1 消息列表查看

**测试步骤**:
1. 访问 `/user/messages`
2. 查看消息列表
3. 测试消息筛选（已读/未读）

**预期结果**:
- 消息列表正确显示
- 未读消息有明显标识
- 筛选功能正常

#### 3.5.2 消息阅读测试

**测试步骤**:
1. 点击任一未读消息
2. 查看消息详情
3. 确认消息状态变为已读

**预期结果**:
- 消息内容完整显示
- 消息状态正确更新

#### 相关页面
- `src/app/[locale]/user/messages/page.tsx` - 用户消息页面

---

## 🏢 4. 企业功能测试

### 4.1 企业档案页面

#### 4.1.1 企业档案创建测试

**测试步骤**:
1. 访问企业档案页面 `/company-profile`
2. 如果未登录，先进行登录
3. 填写或查看企业档案信息
4. 测试企业搜索功能

**预期结果**:
- 企业档案页面正确显示
- 企业信息表单功能正常
- 搜索功能可用

#### 相关页面
- `src/app/[locale]/company-profile/page.tsx` - 企业档案页面

---

### 4.2 企业搜索功能

#### 4.2.1 企业搜索测试

**测试步骤**:
1. 使用企业搜索组件
2. 输入企业名称关键词
3. 查看搜索结果
4. 测试地理位置筛选

**预期结果**:
- 搜索结果准确
- 地理筛选工作正常
- 企业信息显示完整

#### 相关组件和API
- `src/components/company/company-search.tsx` - 企业搜索组件
- `GET /api/company/search` - 企业搜索API

---

## 🛠 5. 管理员后台测试

### 5.1 管理员登录

#### 5.1.1 管理员认证测试

**测试步骤**:
1. 使用管理员账号登录
2. 访问管理员后台 `/admin`
3. 检查管理员权限验证

**预期结果**:
- 管理员可以成功登录后台
- 普通用户无法访问管理员页面
- 权限验证正确工作

#### 相关页面和组件
- `src/app/admin/page.tsx` - 管理员仪表板
- `src/components/admin/admin-auth-guard.tsx` - 管理员权限验证

---

### 5.2 仪表板功能

#### 5.2.1 统计数据查看

**测试步骤**:
1. 在管理员仪表板查看统计卡片
2. 检查用户数量、技术数量、企业数量等统计
3. 查看最近活动记录

**预期结果**:
- 统计数据准确显示
- 卡片样式正确
- 最近活动更新及时

#### 相关组件和API
- `src/components/admin/dashboard/stats-card.tsx` - 统计卡片
- `GET /api/admin/dashboard-stats` - 获取仪表板统计

---

### 5.3 用户管理

#### 5.3.1 用户列表查看

**测试步骤**:
1. 访问 `/admin/users`
2. 查看用户列表
3. 测试用户搜索和筛选
4. 测试分页功能

**预期结果**:
- 用户列表正确显示
- 搜索筛选功能正常
- 分页工作正确

#### 5.3.2 用户编辑测试

**测试步骤**:
1. 在用户列表中选择一个用户
2. 点击"编辑"按钮
3. 修改用户信息（用户名、角色等）
4. 保存更改

**预期结果**:
- 用户信息编辑界面正常
- 修改保存成功
- 用户角色权限正确更新

#### 5.3.3 用户状态管理

**测试步骤**:
1. 测试禁用/启用用户功能
2. 查看用户状态变化

**预期结果**:
- 用户状态正确更新
- 被禁用的用户无法登录

#### 相关页面、组件和API
- `src/app/admin/users/page.tsx` - 用户管理页面
- `src/app/admin/users/components/user-form.tsx` - 用户编辑表单
- `GET /api/admin/users` - 获取用户列表
- `PUT /api/admin/users/[id]` - 更新用户信息

---

### 5.4 技术管理

#### 5.4.1 技术审核功能

**测试步骤**:
1. 访问 `/admin/technologies`
2. 查看待审核技术列表
3. 选择一个待审核技术
4. 执行审核操作（通过/拒绝）
5. 填写审核意见

**预期结果**:
- 待审核技术列表正确显示
- 审核操作界面完整
- 审核结果正确保存
- 用户收到审核通知

#### 5.4.2 技术编辑管理

**测试步骤**:
1. 在技术列表中选择已发布的技术
2. 点击"编辑"按钮
3. 修改技术信息
4. 保存更改

**预期结果**:
- 技术编辑界面正常
- 修改保存成功
- 技术信息更新正确

#### 5.4.3 技术删除测试

**测试步骤**:
1. 选择需要删除的技术
2. 点击"删除"按钮
3. 确认删除操作

**预期结果**:
- 删除确认对话框正常显示
- 技术成功删除
- 相关数据清理完整

#### 相关页面、组件和API
- `src/app/admin/technologies/page.tsx` - 技术管理页面
- `src/app/admin/technologies/components/technology-form.tsx` - 技术编辑表单
- `GET /api/admin/technologies` - 获取技术列表
- `PUT /api/admin/technologies/[id]` - 更新技术
- `POST /api/admin/technologies/[id]/review` - 审核技术
- `DELETE /api/admin/technologies/[id]` - 删除技术

---

### 5.5 企业管理

#### 5.5.1 企业列表管理

**测试步骤**:
1. 访问 `/admin/companies`
2. 查看企业列表
3. 测试企业搜索和筛选
4. 查看企业详细信息

**预期结果**:
- 企业列表正确显示
- 搜索筛选功能正常
- 企业信息完整

#### 5.5.2 企业编辑管理

**测试步骤**:
1. 选择企业进行编辑
2. 修改企业信息
3. 保存更改

**预期结果**:
- 企业编辑功能正常
- 修改保存成功

#### 相关页面、组件和API
- `src/app/admin/companies/page.tsx` - 企业管理页面
- `src/app/admin/companies/components/company-form.tsx` - 企业编辑表单
- `GET /api/admin/companies` - 获取企业列表
- `PUT /api/admin/companies/[id]` - 更新企业信息

---

### 5.6 基础数据管理

#### 5.6.1 技术分类管理

**测试步骤**:
1. 访问 `/admin/basic-data/categories`
2. 查看技术分类列表
3. 测试添加新分类
4. 测试编辑现有分类
5. 测试删除分类

**预期结果**:
- 分类列表正确显示
- 分类层级关系明确
- 增删改操作正常

#### 5.6.2 地理位置数据管理

**测试步骤**:
1. 访问国家管理 `/admin/basic-data/countries`
2. 测试国家的增删改操作
3. 访问省份和开发区管理 `/admin/basic-data/domestic-zones`
4. 测试省份和开发区的层级管理

**预期结果**:
- 地理位置数据管理正常
- 层级关系维护正确
- 级联操作工作正常

#### 相关页面、组件和API
- `src/app/admin/basic-data/categories/` - 分类管理
- `src/app/admin/basic-data/countries/` - 国家管理  
- `src/app/admin/basic-data/domestic-zones/` - 国内区域管理
- 相应的API接口：`/api/admin/categories`, `/api/admin/countries`, `/api/admin/provinces`, `/api/admin/development-zones`

---

### 5.7 轮播图管理

#### 5.7.1 轮播图列表管理

**测试步骤**:
1. 访问 `/admin/carousel`
2. 查看轮播图列表
3. 测试轮播图排序功能（拖拽排序）

**预期结果**:
- 轮播图列表正确显示
- 拖拽排序功能正常
- 排序保存成功

#### 5.7.2 轮播图编辑

**测试步骤**:
1. 点击"添加轮播图"
2. 上传轮播图片
3. 填写标题、描述、链接
4. 设置显示状态
5. 保存轮播图

**预期结果**:
- 图片上传成功
- 轮播图保存成功
- 前台显示正确

#### 相关页面、组件和API
- `src/app/admin/carousel/page.tsx` - 轮播图管理页面
- `src/app/admin/carousel/components/` - 轮播图组件
- `GET /api/admin/carousel` - 获取轮播图列表
- `POST /api/admin/carousel` - 创建轮播图
- `PUT /api/admin/carousel/[id]` - 更新轮播图
- `POST /api/admin/carousel/order` - 更新轮播图排序

---

## 🔧 6. 系统功能测试

### 6.1 文件上传功能

#### 6.1.1 图片上传测试

**测试步骤**:
1. 在任何支持图片上传的界面（用户头像、技术图片、企业logo等）
2. 点击上传按钮
3. 选择不同格式的图片文件（JPG, PNG, GIF）
4. 测试不同大小的图片
5. 确认上传结果

**预期结果**:
- 支持的格式图片上传成功
- 图片自动压缩或裁剪（如果配置）
- 不支持的格式显示错误提示
- 超大文件显示大小限制提示

#### 6.1.2 文件下载测试

**测试步骤**:
1. 在有文件下载功能的页面
2. 点击下载链接
3. 验证文件下载正确

**预期结果**:
- 文件下载成功
- 文件内容正确
- 下载权限验证正常

#### 相关API
- `POST /api/upload` - 文件上传
- `GET /api/files/download` - 文件下载

---

### 6.2 消息系统测试

#### 6.2.1 系统消息测试

**测试步骤**:
1. 执行会触发系统消息的操作（如技术提交、审核等）
2. 检查用户消息中心
3. 验证消息内容和状态

**预期结果**:
- 系统消息正确生成
- 消息内容准确
- 消息状态管理正确

#### 6.2.2 管理员消息测试

**测试步骤**:
1. 在管理员后台查看消息管理
2. 测试管理员回复用户消息
3. 验证消息流转

**预期结果**:
- 管理员消息功能正常
- 消息双向流转正确
- 消息状态同步准确

#### 相关页面
- `src/app/admin/messages/page.tsx` - 管理员消息管理
- `src/app/[locale]/user/messages/page.tsx` - 用户消息中心

---

### 6.3 联系表单功能

#### 6.3.1 联系我们表单测试

**测试步骤**:
1. 在主页找到"联系我们"入口
2. 填写联系表单：
   - 姓名：`张三`
   - 邮箱：`test@example.com`
   - 主题：`产品咨询`
   - 消息内容：详细咨询内容
3. 提交表单

**预期结果**:
- 表单验证正确工作
- 提交成功给出提示
- 管理员能收到联系消息

#### 相关组件
- `src/components/contact/contact-us-modal.tsx` - 联系我们模态框

---

### 6.4 搜索统计功能

#### 6.4.1 搜索统计测试

**测试步骤**:
1. 执行多次不同的搜索操作
2. 在管理员后台查看搜索统计
3. 验证统计数据准确性

**预期结果**:
- 搜索次数统计准确
- 热门关键词统计正确
- 搜索趋势数据可用

#### 相关API
- `GET /api/tech/search-stats` - 搜索统计

---

## 📡 7. API接口测试

### 7.1 认证API测试

#### 7.1.1 SMS认证API

**测试接口**:
```bash
# 发送短信验证码
POST /api/auth/send-sms-code
Content-Type: application/json
{
  "phone": "13800138000",
  "purpose": "register",
  "countryCode": "+86"
}

# 验证短信验证码
POST /api/auth/verify-sms-code
Content-Type: application/json
{
  "phone": "13800138000",
  "code": "123456",
  "purpose": "register"
}
```

**预期结果**:
- 发送验证码返回成功状态
- 验证码验证返回正确结果
- 错误情况返回适当的错误信息

#### 7.1.2 用户注册API

**测试接口**:
```bash
# 手机号注册
POST /api/auth/custom-phone-register
Content-Type: application/json
{
  "mobile": "13800138000",
  "code": "123456",
  "password": "123456",
  "name": "测试用户"
}
```

**预期结果**:
- 注册成功返回用户信息和token
- 重复注册返回适当错误
- 验证码错误返回错误信息

---

### 7.2 技术API测试

#### 7.2.1 技术搜索API

**测试接口**:
```bash
# 技术搜索
GET /api/tech/search?q=太阳能&category=1&country=1&page=1&limit=20
```

**预期结果**:
- 搜索结果符合筛选条件
- 分页参数工作正确
- 返回数据结构完整

#### 7.2.2 技术分类API

**测试接口**:
```bash
# 获取技术分类
GET /api/tech/categories

# 获取筛选选项
GET /api/tech/filter-options
```

**预期结果**:
- 分类数据结构正确
- 层级关系准确
- 筛选选项完整

---

### 7.3 用户API测试

#### 7.3.1 用户技术管理API

**测试接口**:
```bash
# 获取用户技术列表
GET /api/user/technologies
Authorization: Bearer {token}

# 提交技术
POST /api/user/technologies
Authorization: Bearer {token}
Content-Type: application/json
{
  "title": "测试太阳能技术",
  "description": "技术描述",
  "categoryId": 1,
  "subcategoryId": 2,
  "countryId": 1,
  "provinceId": 1,
  "developmentZoneId": 1
}
```

**预期结果**:
- 认证token验证正确
- 用户数据隔离正确
- 操作权限控制正常

---

### 7.4 管理员API测试

#### 7.4.1 管理员统计API

**测试接口**:
```bash
# 获取仪表板统计
GET /api/admin/dashboard-stats
Authorization: Bearer {admin-token}

# 获取详细统计
GET /api/admin/stats
Authorization: Bearer {admin-token}
```

**预期结果**:
- 管理员权限验证正确
- 统计数据准确
- 数据结构完整

---

## 🔍 8. 技术筛选功能优化测试

### 8.1 防抖机制测试

#### 8.1.1 快速连续筛选测试

**测试步骤**:
1. 快速连续点击不同的筛选条件（间隔小于500ms）
2. 观察网络请求的触发情况
3. 检查加载状态指示器

**预期结果**:
- 只有最后一次筛选条件变更触发API调用
- 加载状态指示器在请求期间正确显示
- 防抖延迟为500ms

**测试验证**:
- [x] 防抖机制正常工作
- [x] 避免了频繁API调用
- [x] 用户体验流畅

---

### 8.2 联合筛选测试

#### 8.2.1 多条件联合筛选验证

**测试场景1**: 节能环保技术 + 固废处理技术 + 中国 + 江苏省

**测试步骤**:
1. 选择"节能环保技术"分类
2. 选择"固废处理技术"子分类
3. 选择"中国"国别
4. 选择"江苏省"省份
5. 观察筛选结果

**预期结果**:
- 只显示同时满足以上4个条件的技术
- 结果计数准确显示筛选后的技术数量
- 控制台日志显示所有筛选条件都被正确应用

**测试验证**:
- [x] 联合查询逻辑正确工作
- [x] 多条件组合筛选准确
- [x] 筛选条件计数显示正确

#### 8.2.2 "全部"选项测试

**测试场景**: 全部分类 + 中国 + 江苏省

**测试步骤**:
1. 分类选择"全部分类"
2. 选择"中国"国别
3. 选择"江苏省"省份
4. 验证显示所有分类下江苏省的技术

**预期结果**:
- 显示江苏省所有分类的技术
- "全部"选项正确处理为null值
- 其他筛选条件正常生效

**测试验证**:
- [x] "全部"选项逻辑正确
- [x] null值处理统一
- [x] 级联筛选工作正常

---

### 8.3 性能优化验证

#### 8.3.1 查询性能测试

**测试步骤**:
1. 执行复杂的联合筛选查询
2. 记录API响应时间
3. 检查控制台查询日志
4. 验证数据库查询优化

**性能指标**:
- 筛选查询响应时间 < 1秒
- UUID查询避免不必要的数据库查找
- 批量关联数据查询减少N+1问题

**测试验证**:
- [x] 查询性能明显提升
- [x] UUID查询优化生效
- [x] 批量查询减少数据库访问

#### 8.3.2 缓存策略测试

**测试步骤**:
1. 无筛选条件时加载首页
2. 有筛选条件时执行查询
3. 检查HTTP缓存头部

**预期结果**:
- 无筛选条件时允许60秒缓存
- 有筛选条件时禁用缓存
- 缓存策略智能切换

**测试验证**:
- [x] 智能缓存策略工作正常
- [x] 缓存头部设置正确
- [x] 数据实时性和性能平衡

---

### 8.4 用户体验改进验证

#### 8.4.1 实时状态显示

**测试功能**:
1. 筛选条件数量实时显示
2. 筛选结果数量实时更新
3. 加载状态清晰指示

**测试步骤**:
1. 逐个添加筛选条件
2. 观察页面状态变化
3. 验证数据更新即时性

**预期结果**:
- 活跃筛选条件数量实时显示
- 结果统计准确更新
- 加载动画适时显示

**测试验证**:
- [x] 状态指示器工作正常
- [x] 用户获得清晰的反馈
- [x] 交互体验流畅

#### 8.4.2 筛选条件管理

**测试功能**:
1. 筛选条件级联重置
2. 条件依赖关系处理
3. 条件状态同步

**测试步骤**:
1. 选择"中国"后测试省份选项
2. 选择省份后测试经开区选项  
3. 切换国家时验证省份重置

**预期结果**:
- 级联重置逻辑正确
- 依赖条件自动更新
- 状态同步及时准确

**测试验证**:
- [x] 级联重置功能正常
- [x] 条件依赖正确处理
- [x] 状态同步无延迟

---

### 8.5 边界条件测试

#### 8.5.1 空数据处理

**测试步骤**:
1. 设置筛选条件使结果为空
2. 验证空状态显示
3. 测试边界值处理

**预期结果**:
- 空结果时给出友好提示
- 不出现错误或崩溃
- 提供调整筛选条件的建议

#### 8.5.2 错误处理测试

**测试步骤**:
1. 模拟网络连接错误
2. 模拟数据库查询失败
3. 测试API超时处理

**预期结果**:
- 错误状态有清晰提示
- 提供重试机制
- 不影响其他功能正常使用

**测试验证**:
- [x] 边界条件处理完善
- [x] 错误提示用户友好
- [x] 系统稳定性良好

---

## 📱 9. SMS服务配置测试

### 8.1 腾讯云SMS测试

#### 8.1.1 环境配置验证

**检查项目**:
1. 环境变量 `NEXT_PUBLIC_USE_TENCENT_SMS=true` 已设置
2. 腾讯云SMS相关配置完整
3. 生产环境强制使用腾讯云SMS

**验证步骤**:
1. 查看控制台SMS路由决策日志
2. 确认 `USE_TENCENT_SMS: true` 
3. 确认 `USE_SUPABASE_SMS: false`（生产环境）

#### 8.1.2 SMS发送测试

**测试步骤**:
1. 发送短信验证码
2. 检查控制台日志输出
3. 确认短信接收情况

**预期日志**:
```
📱 短信服务配置 [BUILD TIME]: {
  USE_TENCENT_SMS: true,
  USE_SUPABASE_SMS: false,
  selectedService: 'Tencent'
}

📱 sendPhoneCode [RUNTIME] 路由决策: {
  decision: 'TencentSMS'
}

📱 tencentSmsAuthApi.sendPhoneCode [RUNTIME] 发送请求
```

#### 8.1.3 错误处理测试

**测试场景**:
1. 腾讯云SMS服务异常时的处理
2. 验证码错误时的提示
3. 发送频率限制测试

**预期结果**:
- 错误信息准确显示
- 不会回退到Supabase SMS（生产环境）
- 频率限制正确工作

---

### 8.2 Supabase SMS测试（仅开发环境）

#### 8.2.1 开发环境SMS测试

**测试条件**:
- `NODE_ENV=development`
- `NEXT_PUBLIC_USE_TENCENT_SMS` 未设置或为false

**测试步骤**:
1. 发送短信验证码
2. 检查是否使用Supabase SMS
3. 验证短信接收

**预期结果**:
- 开发环境可以使用Supabase SMS
- 不出现422 OTP错误
- SMS服务正常工作

---

### 8.3 SMS服务故障排查

#### 8.3.1 常见问题诊断

**问题1: 生产环境仍出现Supabase OTP 422错误**

**排查步骤**:
1. 检查环境变量配置
2. 查看控制台SMS路由日志
3. 确认 `USE_SUPABASE_SMS: false`

**解决方案**:
- 设置 `NEXT_PUBLIC_USE_TENCENT_SMS=true`
- 清除Vercel部署缓存
- 重新部署项目

**问题2: SMS验证码发送失败**

**排查步骤**:
1. 检查腾讯云SMS服务状态
2. 验证腾讯云配置信息
3. 查看API调用日志

**解决方案**:
- 验证腾讯云SMS配置
- 检查账户余额和服务状态
- 确认SMS模板和签名正确

#### 相关配置文件
- `src/api/auth.ts` - SMS路由配置
- `src/api/tencentSmsAuth.ts` - 腾讯云SMS实现
- `src/api/supabaseAuth.ts` - Supabase SMS实现

---

## 🚀 9. 性能与兼容性测试

### 9.1 页面性能测试

#### 9.1.1 首页加载测试

**测试步骤**:
1. 使用浏览器开发工具监控页面加载
2. 记录首屏加载时间
3. 检查资源加载情况

**性能指标**:
- 首屏加载时间 < 3秒
- 完全加载时间 < 5秒
- 图片懒加载正常工作

#### 9.1.2 搜索响应性能

**测试步骤**:
1. 执行复杂搜索操作
2. 记录搜索响应时间
3. 测试大数据量分页性能

**性能指标**:
- 搜索响应时间 < 2秒
- 分页加载时间 < 1秒
- 筛选操作响应及时

---

### 9.2 移动端兼容性

#### 9.2.1 响应式设计测试

**测试设备尺寸**:
- iPhone SE (375px)
- iPhone 12 (390px) 
- iPad (768px)
- iPad Pro (1024px)

**测试项目**:
- 页面布局适配
- 导航菜单响应
- 表单输入体验
- 触控操作响应

#### 9.2.2 移动端功能测试

**测试重点**:
- SMS验证码接收
- 图片上传功能
- 搜索筛选操作
- 表单提交流程

**预期结果**:
- 所有功能在移动端正常工作
- 用户体验流畅
- 没有操作死角

---

### 9.3 浏览器兼容性

#### 9.3.1 主流浏览器测试

**测试浏览器**:
- Chrome (最新版本)
- Firefox (最新版本)
- Safari (最新版本)
- Edge (最新版本)

**测试内容**:
- 页面显示效果
- JavaScript功能
- CSS样式兼容性
- 表单提交功能

#### 9.3.2 浏览器特性测试

**测试项目**:
- localStorage支持
- 现代JavaScript语法
- CSS Grid和Flexbox
- 图片格式支持

---

## 🔒 10. 安全性测试

### 10.1 身份认证安全

#### 10.1.1 JWT Token测试

**测试项目**:
1. Token过期处理
2. Token刷新机制
3. 无效Token处理
4. Token存储安全

**测试步骤**:
1. 使用过期Token访问API
2. 测试Token自动刷新
3. 尝试使用无效Token
4. 检查Token存储方式

**预期结果**:
- 过期Token被正确拒绝
- Token刷新机制正常工作
- 无效Token返回适当错误
- Token安全存储（localStorage）

#### 10.1.2 密码安全测试

**测试项目**:
1. 密码复杂度验证
2. 密码传输安全
3. 密码存储安全
4. 密码重置安全

**测试步骤**:
1. 尝试设置简单密码
2. 检查密码传输方式
3. 验证数据库密码存储
4. 测试密码重置流程

**预期结果**:
- 密码复杂度要求正确执行
- 密码通过HTTPS传输
- 密码被正确哈希存储
- 密码重置流程安全

---

### 10.2 权限控制测试

#### 10.2.1 用户权限测试

**测试场景**:
1. 未登录用户访问受保护页面
2. 普通用户访问管理员功能
3. 用户访问其他用户数据
4. 跨用户数据操作

**测试步骤**:
1. 直接访问 `/admin` 页面（未登录）
2. 普通用户访问管理员API
3. 用户A尝试修改用户B的数据
4. 尝试跨用户操作API

**预期结果**:
- 未授权访问被正确拒绝
- 权限验证在前端和后端都正确执行
- 数据访问严格按用户隔离
- API权限控制有效

#### 10.2.2 数据访问安全

**测试项目**:
1. 用户数据隔离
2. 敏感信息保护
3. API访问控制
4. 文件访问权限

**测试步骤**:
1. 验证用户只能看到自己的数据
2. 检查API返回的敏感信息
3. 测试无权限API访问
4. 尝试访问其他用户上传的文件

**预期结果**:
- 用户数据完全隔离
- 敏感信息不在API响应中暴露
- API访问控制严格
- 文件访问权限正确

---

### 10.3 输入验证安全

#### 10.3.1 XSS防护测试

**测试步骤**:
1. 在表单输入框中输入恶意脚本
2. 在搜索框中输入HTML标签
3. 在用户名等字段输入JavaScript代码
4. 检查页面输出是否被正确转义

**测试输入示例**:
```html
<script>alert('XSS')</script>
<img src="x" onerror="alert('XSS')">
javascript:alert('XSS')
```

**预期结果**:
- 恶意脚本不被执行
- HTML标签被正确转义
- 输出内容安全显示

#### 10.3.2 SQL注入防护

**测试步骤**:
1. 在搜索框输入SQL注入尝试
2. 在API参数中插入SQL语句
3. 测试批量SQL注入

**测试输入示例**:
```sql
'; DROP TABLE users; --
' OR '1'='1
UNION SELECT * FROM users
```

**预期结果**:
- SQL注入尝试被正确防护
- 数据库操作使用参数化查询
- 错误信息不暴露数据库结构

---

## 🔧 11. 环境配置验证

### 11.1 开发环境配置

#### 11.1.1 环境变量检查

**必需环境变量**:
```bash
# Supabase配置
NEXT_PUBLIC_SUPABASE_URL=
NEXT_PUBLIC_SUPABASE_ANON_KEY=
SUPABASE_SERVICE_ROLE_KEY=

# SMS服务配置
NEXT_PUBLIC_USE_TENCENT_SMS=true
TENCENT_SECRET_ID=
TENCENT_SECRET_KEY=
TENCENT_SMS_SDK_APP_ID=

# Resend邮件服务
RESEND_API_KEY=

# Cloudflare Turnstile
NEXT_PUBLIC_TURNSTILE_SITE_KEY=
TURNSTILE_SECRET_KEY=
```

**验证步骤**:
1. 检查 `.env.local` 文件
2. 验证环境变量加载情况
3. 测试各服务连接

#### 11.1.2 数据库连接测试

**测试步骤**:
1. 验证Supabase连接
2. 检查数据表结构
3. 测试数据库操作权限

**预期结果**:
- 数据库连接成功
- 所需表结构完整
- RLS（行级安全）策略正确

---

### 11.2 生产环境配置

#### 11.2.1 Vercel部署配置

**检查项目**:
1. Vercel环境变量配置
2. 构建和部署设置
3. 域名和SSL配置

**验证步骤**:
1. 检查Vercel项目设置
2. 验证环境变量完整性
3. 测试生产环境访问

#### 11.2.2 CDN和性能优化

**检查项目**:
1. 静态资源CDN配置
2. 图片优化设置
3. 缓存策略配置

**验证步骤**:
1. 检查资源加载来源
2. 验证图片压缩效果
3. 测试缓存策略

---

## 🚨 12. 常见问题排查

### 12.1 登录相关问题

#### 问题1: SMS验证码收不到

**可能原因**:
- SMS服务配置错误
- 手机号格式不正确
- 短信服务商问题
- 频率限制

**排查步骤**:
1. 检查控制台SMS路由日志
2. 验证环境变量配置
3. 确认手机号格式（仅支持中国大陆）
4. 检查发送频率限制

**解决方案**:
- 设置正确的环境变量
- 等待60秒后重新发送
- 检查腾讯云SMS服务状态

#### 问题2: 登录后页面不跳转

**可能原因**:
- Token存储失败
- 认证状态更新延迟
- 页面路由配置问题

**排查步骤**:
1. 检查localStorage中的token
2. 检查网络请求状态
3. 查看控制台错误信息

**解决方案**:
- 清除浏览器缓存和localStorage
- 检查网络连接
- 重新登录

---

### 12.2 功能相关问题

#### 问题1: 图片上传失败

**可能原因**:
- 文件格式不支持
- 文件大小超限
- 网络连接问题
- 服务器存储问题

**排查步骤**:
1. 检查文件格式和大小
2. 查看网络请求状态
3. 检查服务器日志

**解决方案**:
- 使用支持的图片格式（JPG, PNG）
- 压缩图片大小
- 检查网络连接稳定性

#### 问题2: 搜索结果不准确

**可能原因**:
- 搜索索引问题
- 数据库数据不完整
- 搜索算法问题

**排查步骤**:
1. 检查搜索参数
2. 验证数据库数据完整性
3. 查看API返回结果

**解决方案**:
- 重建搜索索引
- 检查数据导入情况
- 调整搜索算法

---

### 12.3 性能相关问题

#### 问题1: 页面加载缓慢

**可能原因**:
- 图片资源过大
- 数据库查询慢
- 网络连接不稳定
- CDN配置问题

**排查步骤**:
1. 使用浏览器性能分析工具
2. 检查网络请求时间
3. 分析资源加载情况

**解决方案**:
- 优化图片大小和格式
- 优化数据库查询
- 配置CDN加速

#### 问题2: 移动端体验差

**可能原因**:
- 响应式设计问题
- 触控操作不友好
- 移动端性能问题

**排查步骤**:
1. 在不同设备上测试
2. 检查CSS媒体查询
3. 测试触控操作

**解决方案**:
- 优化响应式设计
- 改善移动端交互
- 优化移动端性能

---

## 📝 13. 测试报告模板

### 13.1 测试执行记录

**测试信息**:
- 测试日期：[填写日期]
- 测试人员：[填写姓名]
- 测试环境：[开发/测试/生产]
- 浏览器版本：[填写版本信息]

**测试结果统计**:
- 总测试项目：[数量]
- 通过项目：[数量]
- 失败项目：[数量]
- 阻塞项目：[数量]

### 13.2 问题记录格式

**问题编号**: [唯一编号]
**问题标题**: [简要描述]
**严重程度**: [高/中/低]
**问题类型**: [功能/界面/性能/安全]
**发现时间**: [时间]
**问题描述**: [详细描述问题现象]
**重现步骤**: [具体操作步骤]
**预期结果**: [应该的正确结果]
**实际结果**: [实际观察到的结果]
**环境信息**: [浏览器、系统版本等]
**附件**: [截图、日志等]

### 13.3 测试总结模板

**测试概述**:
- 测试目标完成情况
- 主要发现和问题
- 测试覆盖率评估

**质量评估**:
- 功能完整性
- 用户体验评价
- 性能表现
- 安全性评估

**建议和后续行动**:
- 需要修复的问题
- 功能改进建议
- 后续测试计划

---

## 📚 14. 相关技术文档

### 14.1 技术架构文档
- [README.md](../README.md) - 项目整体介绍
- [CLAUDE.md](../CLAUDE.md) - 项目开发指南
- [setup-database.md](setup-database.md) - 数据库配置

### 14.2 功能实现文档
- [AUTH_API.md](AUTH_API.md) - 认证系统API文档
- [SMS_SERVICE_SETUP.md](SMS_SERVICE_SETUP.md) - SMS服务配置
- [i18n-implementation.md](i18n-implementation.md) - 国际化实现

### 14.3 部署和运维文档
- [VERCEL_DEPLOYMENT.md](../VERCEL_DEPLOYMENT.md) - Vercel部署指南
- [env-config.md](env-config.md) - 环境变量配置

---

**文档版本**: v1.0
**最后更新**: [填写日期]
**维护人员**: [填写姓名]

---

> ⚠️ **注意事项**:
> 1. 本文档应定期更新，确保与系统功能保持同步
> 2. 测试过程中发现问题应及时记录并跟踪解决
> 3. 重要功能变更后应重新执行相关测试
> 4. 生产环境测试应谨慎进行，避免影响正常服务